@startuml usecase-diagram
title Convert-UmlToSvg - Use Case Diagram

left to right direction

actor "Developer" as Dev
actor "CI/CD System" as CICD
actor "Documentation Team" as DocTeam

rectangle "Convert-UmlToSvg System" {
    usecase "Check Dependencies" as UC1
    usecase "Install Dependencies" as UC2
    usecase "Convert Single File" as UC3
    usecase "Batch Convert Files" as UC4
    usecase "Validate Syntax" as UC5
    usecase "Preview SVG" as UC6
    usecase "Execute Raw Command" as UC7
    usecase "View Logs" as UC8
    
    usecase "Auto-Download PlantUML" as UC2.1
    usecase "Auto-Install Java" as UC2.2
    usecase "Auto-Install Graphviz" as UC2.3
    
    usecase "Process .puml File" as UC3.1
    usecase "Generate SVG Output" as UC3.2
    
    usecase "Find All .puml Files" as UC4.1
    usecase "Convert Each File" as UC4.2
    usecase "Report Results" as UC4.3
}

' Developer use cases
Dev --> UC1 : runs -Check
Dev --> UC2 : runs -Check -Download
Dev --> UC3 : converts diagram
Dev --> UC4 : batch processes
Dev --> UC5 : validates syntax
Dev --> UC6 : previews output
Dev --> UC7 : custom PlantUML command
Dev --> UC8 : troubleshoots with -Verbose

' CI/CD use cases
CICD --> UC1 : verifies environment
CICD --> UC4 : generates diagrams
CICD --> UC5 : validates in pipeline

' Documentation Team use cases
DocTeam --> UC3 : updates diagram
DocTeam --> UC4 : regenerates all
DocTeam --> UC6 : reviews output

' Include relationships
UC2 .> UC2.1 : <<include>>
UC2 .> UC2.2 : <<include>>
UC2 .> UC2.3 : <<include>>

UC3 .> UC3.1 : <<include>>
UC3 .> UC3.2 : <<include>>

UC4 .> UC4.1 : <<include>>
UC4 .> UC4.2 : <<include>>
UC4 .> UC4.3 : <<include>>

' Extend relationships
UC3 ..> UC6 : <<extend>>\n-Preview
UC4 ..> UC6 : <<extend>>\n-Preview
UC3 ..> UC8 : <<extend>>\n-Verbose
UC4 ..> UC8 : <<extend>>\n-Verbose

' Dependencies
UC3 ..> UC1 : <<requires>>
UC4 ..> UC1 : <<requires>>
UC5 ..> UC1 : <<requires>>
UC7 ..> UC1 : <<requires>>

note right of UC2
    Automated installation:
    • PlantUML: GitHub download
    • Java: MS OpenJDK portable
    • Graphviz: winget install
end note

note bottom of UC4
    Test Case 2 Validation:
    ✅ Converted 5 examples
    ✅ Total 108,184 bytes
    ✅ 0 failures
end note

note right of UC1
    Multi-path detection:
    1. Local: %USERPROFILE%\.java
    2. Local: %USERPROFILE%\.plantuml
    3. Program Files: Graphviz
    4. System PATH fallback
end note

@enduml
